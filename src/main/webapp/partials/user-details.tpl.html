<legend>{{ headline }}</legend>

<!--------Add New User Form------>

<form name="userForm" class="form-horizontal" autocomplete="off" role="form" unsaved-warning-form >
    <div class="form-group">
        <label class="col-sm-2 control-label" for="usernameInput">Username</label>
        <div class="col-sm-4">
            <input type="text" id="usernameInput" name="usernameInput" class="form-control" ng-model="user.userName"  ng-mouseleave="onMouseLeave(user.userName)"
                   placeholder="UserName" required>
            <span ng-show="userForm.usernameInput.$dirty && userForm.usernameInput.$error.required">Username required</span>
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label" for="firstNameInput">First Name</label>
        <div class="col-sm-4">
            <input type="text" id="firstNameInput" class="form-control" ng-model="user.firstName" placeholder="First Name"ng-required >
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label" for="lastNameInput">Last Name</label>
        <div class="col-sm-4">
            <input type="text" id="lastNameInput" class="form-control" ng-model="user.lastName" placeholder="Last Name">
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label" for="passwordInput">Password</label>
        <div class="col-sm-4">
           <!-- <input type="password" id="passwordInput" class="form-control" ng-model="userPassword" ng-blur="callBlurFunction(userPassword)">
            <input type="hidden" id="passwordHiddenInput" class="form-control" ng-model="user.password">-->
            <input type="password" id="passwordInput" name="passwordInput" class="form-control" ng-model="user.password" placeholder="Password">
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label" for="confirmPasswordInput">Confirm Password</label>
        <div class="col-sm-4">
            <!--<input type="password" id="confirmPasswordInput" class="form-control" ng-model="confirmPassword"
                    ng-blur="passwordCheck(confirmPassword)">-->
            <input type="password" id="confirmPasswordInput" name="confirmPasswordInput" class="form-control" ng-model="ConfirmPassword"
                   pw-check="passwordInput" placeholder="Confirm Password">
            <div class="msg-block" ng-show="userForm.$error">
                 <span class="msg-error" ng-show="userForm.confirmPasswordInput.$error.pwmatch">Passwords don't match.</span>
            </div>
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label" for="contactInput">Contact</label>
        <div class="col-sm-4" ng-class="{ 'has-error': userForm.contactInput.$invalid && userForm.contactInput.$dirty }">
            <input type="text" id="contactInput" name="contactInput" class="form-control" ng-model="user.contact" ng-minlength="7" ng-maxlength="10" placeholder="contact number">
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label" for="emailInput">Email</label>
        <div class="col-sm-4" ng-class="{ 'has-error': userForm.emailInput.$invalid && userForm.emailInput.$dirty }">
            <input type="email" id="emailInput" name="emailInput" class="form-control" ng-model="user.email" placeholder="Email">
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label" for="addressInput">Address</label>
        <div class="col-sm-4">
            <input type="text" id="addressInput" class="form-control" ng-model="user.address1" placeholder="Address">
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label" for="cityInput">City</label>
        <div class="col-sm-4">
            <input type="text" id="cityInput" class="form-control" ng-model="user.city" placeholder="City">
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label" for="stateInput">State</label>
        <div class="col-sm-4">
            <input type="text" id="stateInput" class="form-control" ng-model="user.state" placeholder="State">
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label">Type</label>
        <div class="col-sm-6">
           <label class="radio-inline" for="radioAgent"><input type="radio" id="radioAgent" name="radioAgent" ng-model="user.type" value="AGENT">Agent</label>
           <label class="radio-inline" for="radioEmployee"><input type="radio" id="radioEmployee" name="radioEmployee" ng-model="user.type" value="EMPLOYEE">Employee</label>
           <label class="radio-inline" for="radioAdmin"><input type="radio" id="radioAdmin" name="radioAdmin" ng-model="user.type" value="ADMIN">Admin</label>
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label" for="commissionInput">Commission</label>
        <div class="col-sm-4">
            <input type="text" id="commissionInput" class="form-control" ng-model="user.commission" placeholder="Commission">
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label checkbox" for="activeInput">Active</label>
        <div class="col-xs-1">
            <input type="checkbox" id="activeInput" class="form-control" ng-model="user.active">
        </div>
    </div>

    <div class="form-group row">
        <div class="col-sm-4 text-right">
            <button class="btn btn-primary" ng-click="saveButtonClicked()">Save User</button>
        </div>
        <div class="col-sm-3 next">
            <button  class="btn btn-danger" ng-click="deleteButtonClicked()">Cancel</button>
        </div>
    </div>

</form>


<br/>
<br/>
<br/>


<accordion close-others="oneAtATime">
    <accordion-group is-open="status.open">
        <accordion-heading>
            <div class="debug-accordion">
                <i class="glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i> Debug info
            </div>
        </accordion-heading>
        <pre class="tiny-debug" ng-bind="user | json"></pre>
    </accordion-group>
</accordion>



<!-- modal popup for associating businesses -->

<script type="text/ng-template" id="associated-businesses-modal.html">
    <div class="modal-header">
        <div class="row">
            <div class="col-sm-5 col-md-5">
                <h4 class="modal-title">Associate Businesses</h4>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4 pull-right">
                <button class="btn btn-primary" ng-click="ok()">Ok</button>
                <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
            </div>
        </div>
    </div>
    <div class="modal-body">

        <!-- ---------------------------------------------------------------------------- -->
        <table class="table table-condensed table-striped">
            <thead>
            <tr>
                <th>Selected?</th>
                <th>Name</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="business in businessList">
                <td><input type="checkbox" ng-model="business.selected"></td>
                <td>{{business.displayName}}</td>
            </tr>
            <tr ng-if="businessList.length === 0"><td colspan="5">No businesses were found.</td></tr>
            </tbody>
        </table>

        <!-- ---------------------------------------------------------------------------- -->
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="ok()">Ok</button>
        <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
    </div>
</script>



<div id="infoOverlay">
    <div id="infoOverlayDetails"></div>
</div>